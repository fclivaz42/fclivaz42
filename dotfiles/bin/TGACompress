#!/bin/bash
compr()
{
	if identify -format '%[opaque]' "$1" | grep -q "True" && identify -format '%[channels]' "$1" | grep -q "4"; then
		magick "$1" -alpha off "$1" && echo -e "Removed Alpha:\t $1"
	fi
	if identify -format '%[compression]' "$1" | grep -q None; then
		magick -compress RLE "$1" "$1" && echo -e "Compressed:\t $1"
	fi
}
export -f compr
find . -name "*.tga" -exec bash -c "compr '{}'" \;
